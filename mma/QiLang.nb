(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12057,        363]
NotebookOptionsPosition[     10696,        312]
NotebookOutlinePosition[     11034,        327]
CellTagsIndexPosition[     10991,        324]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Simple language for quantum computing", "Section",
 CellChangeTimes->{{3.732435648285994*^9, 3.732435658274324*^9}, {
  3.732593260231968*^9, 3.732593263853664*^9}, {3.732593318323062*^9, 
  3.732593325764927*^9}}],

Cell[CellGroupData[{

Cell["Qudits and qubits", "Subsection",
 CellChangeTimes->{{3.732435538159339*^9, 3.732435585427601*^9}, {
  3.732435616839052*^9, 3.732435616940593*^9}, {3.732435661654868*^9, 
  3.732435703117844*^9}, {3.732438208208458*^9, 3.7324382122938347`*^9}, {
  3.732593265248825*^9, 3.732593272946897*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"qudit", "[", 
   RowBox[{"d_Integer", ",", "k_Integer"}], "]"}], ":=", 
  RowBox[{"QInt", "[", 
   RowBox[{"UnitVector", "[", 
    RowBox[{"d", ",", 
     RowBox[{"k", "+", "1"}]}], "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7325139962576647`*^9, 3.732514015422934*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"qubit", "[", "k_Integer", "]"}], ":=", 
  RowBox[{"qudit", "[", 
   RowBox[{"2", ",", "k"}], "]"}]}]], "Input"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Single register gates", "Subsection",
 CellChangeTimes->{{3.732435775626952*^9, 3.7324357759892387`*^9}, {
  3.732593281172258*^9, 3.7325932971224337`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"not", "[", "d_Integer", "]"}], ":=", 
  RowBox[{"QGate", "[", 
   RowBox[{"Map", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"UnitVector", "[", 
       RowBox[{"d", ",", "#"}], "]"}], "&"}], ",", 
     RowBox[{
      RowBox[{"Range", "[", 
       RowBox[{"2", ",", "d"}], "]"}], "~", "Join", "~", 
      RowBox[{"{", "1", "}"}]}]}], "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.732435049370915*^9, 3.73243505960028*^9}, {
  3.732435162099069*^9, 3.732435185603758*^9}, {3.7324354012685223`*^9, 
  3.732435401472303*^9}, {3.7324354647775517`*^9, 3.732435465322447*^9}, {
  3.732435713737915*^9, 3.732435715425693*^9}, {3.732436006849238*^9, 
  3.7324360199101133`*^9}, {3.732436813222681*^9, 3.732436836674986*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"qft", "[", "d_Integer", "]"}], ":=", 
  RowBox[{"QGate", "[", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "\[Omega]", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"\[Omega]", "=", 
       RowBox[{"Exp", "[", 
        RowBox[{"2", " ", "\[Pi]", " ", 
         RowBox[{"I", "/", "d"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"1", "/", 
        RowBox[{"Sqrt", "[", "d", "]"}]}], " ", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{"\[Omega]", "^", 
          RowBox[{"(", 
           RowBox[{"i", " ", "k"}], ")"}]}], ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "0", ",", 
           RowBox[{"d", "-", "1"}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"k", ",", "0", ",", 
           RowBox[{"d", "-", "1"}]}], "}"}]}], "]"}]}]}]}], 
    "\[IndentingNewLine]", "]"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.732437784934366*^9, 3.732437826581789*^9}, {
  3.732437882809413*^9, 3.732437892505828*^9}, {3.7324379371639833`*^9, 
  3.732437940407695*^9}, {3.732438041939446*^9, 3.732438066965061*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"h", "[", "2", "]"}], "=", 
   RowBox[{"qft", "[", "2", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.732593655154599*^9, 3.73259366655416*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["The interpreter", "Subsection",
 CellChangeTimes->{{3.732438234036165*^9, 3.732438238876095*^9}, {
  3.732593275487969*^9, 3.7325933029998283`*^9}, {3.7325933338856163`*^9, 
  3.732593334114851*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"QRun", "[", 
    RowBox[{"g_QGate", ",", "r_QInt"}], "]"}], ":=", 
   RowBox[{"QInt", "[", 
    RowBox[{
     RowBox[{"g", "[", 
      RowBox[{"[", "1", "]"}], "]"}], ".", 
     RowBox[{"r", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.732436888675305*^9, 3.732436920373822*^9}, {
   3.7324380783140783`*^9, 3.732438081359447*^9}, {3.732593707005954*^9, 
   3.732593716113823*^9}, 3.732594267507741*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"QMeasure", "[", "q_QInt", "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"d", "=", 
       RowBox[{"Length", "[", 
        RowBox[{"q", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"QInt", "[", 
      RowBox[{"UnitVector", "[", 
       RowBox[{"d", ",", 
        RowBox[{"RandomChoice", "[", 
         RowBox[{
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"Abs", "[", "#", "]"}], "^", "2"}], "&"}], ",", 
            RowBox[{"q", "[", 
             RowBox[{"[", "1", "]"}], "]"}]}], "]"}], " ", "\[Rule]", 
          RowBox[{"Range", "[", "d", "]"}]}], "]"}]}], "]"}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.732593463441681*^9, 3.732593494795751*^9}, {
  3.732593525400976*^9, 3.73259353160222*^9}, {3.732593603464982*^9, 
  3.732593626038206*^9}, {3.732593762949778*^9, 3.732593783874895*^9}, {
  3.7325938289218884`*^9, 3.732593952902081*^9}, {3.7325939912462463`*^9, 
  3.732594188877087*^9}, {3.732594260087968*^9, 3.7325942695248613`*^9}, {
  3.732594325755575*^9, 3.732594326141431*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"QDump", "[", "q_QInt", "]"}], ":=", 
  RowBox[{"Block", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"Outer", "[", 
     RowBox[{
      RowBox[{"Map", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"Abs", "[", "#", "]"}], "^", "2"}], "&"}], ",", 
        RowBox[{"q", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", 
      RowBox[{"Range", "[", 
       RowBox[{"Length", "[", 
        RowBox[{"q", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}]}], "]"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.732594274847261*^9, 3.73259430323734*^9}, {
  3.732601611628797*^9, 3.732601720743382*^9}}],

Cell[BoxData[{
 RowBox[{"$PrePrint", "=."}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"$PrePrint", "=", 
   RowBox[{
    RowBox[{"Switch", "[", 
     RowBox[{
      RowBox[{"Head", "[", "#", "]"}], ",", "\[IndentingNewLine]", "QInt", 
      ",", " ", 
      RowBox[{"Map", "[", 
       RowBox[{
        RowBox[{"#", "&"}], ",", 
        RowBox[{"#", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "]"}], ",", "\[IndentingNewLine]", 
      "QGate", ",", 
      RowBox[{"MatrixForm", "[", 
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "]"}], ",", "\[IndentingNewLine]", 
      "_", ",", "#"}], "\[IndentingNewLine]", "]"}], "&"}]}], ";"}]}], "Input",\

 CellChangeTimes->{{3.732512653212735*^9, 3.732512683969479*^9}, {
   3.732512807667473*^9, 3.7325128546488028`*^9}, {3.732512905207158*^9, 
   3.732512912358993*^9}, {3.732513046404539*^9, 3.7325131525353413`*^9}, 
   3.732513195157061*^9, {3.732513237422846*^9, 3.73251324042481*^9}, {
   3.732513482057871*^9, 3.732513544221326*^9}, {3.7325135971004753`*^9, 
   3.732513688403775*^9}, {3.73251388626156*^9, 3.7325138924634657`*^9}, {
   3.732513948822544*^9, 3.732513972856497*^9}, {3.732514041679414*^9, 
   3.732514086809785*^9}, {3.732514209773095*^9, 3.732514251689477*^9}, {
   3.7325935533074903`*^9, 3.732593580308321*^9}, {3.732598057918057*^9, 
   3.7325980943078833`*^9}, {3.7325981477132673`*^9, 3.732598191982534*^9}, {
   3.732601506126545*^9, 3.732601583411334*^9}}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Examples", "Section",
 CellChangeTimes->{{3.732593338698969*^9, 3.7325933458017807`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"g1", "=", 
   RowBox[{"h", "[", "2", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.732593359508973*^9, 3.732593362985217*^9}, {
  3.732593639794468*^9, 3.732593644410133*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"r1", "=", 
   RowBox[{"qubit", "[", "0", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.732593366844406*^9, 3.7325933724901667`*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"r2", "=", 
  RowBox[{"QRun", "[", 
   RowBox[{"g1", ",", "r1"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.73259337406798*^9, 3.732593378466584*^9}, {
  3.732593720436453*^9, 3.732593721164751*^9}, {3.732593966176754*^9, 
  3.732593966319502*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   FractionBox["1", 
    SqrtBox["2"]], ",", 
   FractionBox["1", 
    SqrtBox["2"]]}], "}"}]], "Output",
 CellChangeTimes->{{3.732593379041092*^9, 3.732593406284738*^9}, 
   3.732593677865937*^9, {3.732593710252832*^9, 3.7325937216103354`*^9}, {
   3.7325939666997004`*^9, 3.732593976243972*^9}, 3.7325940356735153`*^9, 
   3.732594203102482*^9, 3.732598196446806*^9, {3.73260154289402*^9, 
   3.7326015807452602`*^9}, 3.732601616921741*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"measure", "[", "r2", "]"}]], "Input",
 CellChangeTimes->{{3.7325937113209677`*^9, 3.73259372871461*^9}, {
  3.7325939695381947`*^9, 3.732593969617262*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "2"}], "}"}]], "Print",
 CellChangeTimes->{{3.732594014863841*^9, 3.732594068295117*^9}, {
   3.732594106195463*^9, 3.732594139355208*^9}, {3.73259417225424*^9, 
   3.732594203760427*^9}, 3.732598198286326*^9, 3.7326016175049877`*^9, 
   3.7326016725033693`*^9}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"1", ",", "0"}], "}"}]], "Output",
 CellChangeTimes->{{3.732594172254796*^9, 3.7325942037609043`*^9}, 
   3.732598198286848*^9, 3.732601617505476*^9, 3.732601672503846*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"QDump", "[", "r1", "]"}]], "Input",
 CellChangeTimes->{{3.732601618753936*^9, 3.7326016249539433`*^9}}],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0"}], "}"}], "[", "1", "]"}], ",", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"1", ",", "0"}], "}"}], "[", "2", "]"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.732601622237166*^9, 3.732601625714347*^9}, 
   3.732601673295637*^9, 3.732601722846776*^9}]
}, Open  ]]
}, Open  ]]
},
WindowSize->{808, 911},
WindowMargins->{{Automatic, 829}, {Automatic, 33}},
FrontEndVersion->"10.0 for Linux x86 (64-bit) (December 4, 2014)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 220, 3, 65, "Section"],
Cell[CellGroupData[{
Cell[825, 29, 300, 4, 45, "Subsection"],
Cell[1128, 35, 310, 8, 32, "Input"],
Cell[1441, 45, 146, 4, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1624, 54, 162, 2, 45, "Subsection"],
Cell[1789, 58, 755, 17, 32, "Input"],
Cell[2547, 77, 1139, 29, 99, "Input"],
Cell[3689, 108, 192, 5, 32, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[3918, 118, 205, 3, 45, "Subsection"],
Cell[4126, 123, 499, 13, 32, "Input"],
Cell[4628, 138, 1262, 31, 77, "Input"],
Cell[5893, 171, 743, 21, 77, "Input"],
Cell[6639, 194, 1460, 30, 143, "Input"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[8148, 230, 95, 1, 65, "Section"],
Cell[8246, 233, 212, 5, 32, "Input"],
Cell[8461, 240, 169, 4, 32, "Input"],
Cell[CellGroupData[{
Cell[8655, 248, 270, 6, 32, "Input"],
Cell[8928, 256, 482, 11, 55, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[9447, 272, 179, 3, 32, "Input"],
Cell[9629, 277, 311, 6, 23, "Print"],
Cell[9943, 285, 211, 4, 32, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[10191, 294, 127, 2, 32, "Input"],
Cell[10321, 298, 347, 10, 32, "Output"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
